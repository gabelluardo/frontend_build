(this.webpackJsonpmarta=this.webpackJsonpmarta||[]).push([[11],{738:function(e,t,a){"use strict";a.r(t);var l=a(546),n=a(2),c=a(560),r=a(561),u=a(141),d=a(548),i=a(711),m=a(733),s=a(577),o=a(742),f=a(712),E=a(734),b=a(144),p=(a(716),a(717),{type:"info",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],width:300,dismiss:{duration:2500,onScreen:!0,pauseOnHover:!0,showIcon:!0}}),v=function(e){var t=e.state,a=e.settings,c=e.reloadStatus,r=Object(n.useState)(!1),u=Object(l.a)(r,2),v=u[0],g=u[1],O=Object(n.useState)(),j=Object(l.a)(O,2),k=j[0],x=j[1],y=Object(n.useCallback)((function(){g(!v)}),[v]);Object(n.useEffect)((function(){N()}),[t,a]);var C=Object(n.useCallback)((function(){b.store.addNotification(Object(d.a)(Object(d.a)({},p),{},{title:"State",message:"Aggiornato lo status",type:"success"})),c()}),[]),N=Object(n.useCallback)((function(){var e=Object(d.a)({},t),l=Object(d.a)({},a);delete e.dest,delete e.type,delete l.dest,delete l.type;var n=JSON.stringify(e,null,1).replace(/\{|\}|"|,|/g,"").replace("\n",""),c=JSON.stringify(l,null,1).replace(/\{|\}|"|,/g,"");x("".concat(n).concat(c))}),[t,a]);return n.default.createElement(i.a,null,n.default.createElement(m.a,null,n.default.createElement(s.a,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:y,"aria-expanded":v},n.default.createElement("strong",null,"Status"))),n.default.createElement(o.a,{isOpen:!v},n.default.createElement(f.a,null,n.default.createElement("pre",null,n.default.createElement("code",null,k))),n.default.createElement(E.a,null,n.default.createElement(s.a,{className:"text-white bg-cyan",type:"submit",size:"sl",onClick:C},n.default.createElement("i",{className:"fa fa-refresh"})," Reload"))))},g=a(735),O=a(736),j=a(737),k=a(576),x=a(559),y=function(e){var t=e.dest,a=e.value,v=e.reloadStatus,y=Object(n.useState)(!1),C=Object(l.a)(y,2),N=C[0],S=C[1],h=Object(n.useRef)({dest:t,type:"7",value:a,name:""}),w=Object(n.useCallback)((function(){S(!N)}),[N]),z=Object(n.useCallback)((function(){h.current.value=!h.current.value}),[h]),I=Object(n.useCallback)((function(e){var t=e.target.value;e.target.validity.valid&&(h.current.name=t)}),[h]),R=Object(n.useCallback)((function(){u.a.sendVideo(h.current),b.store.addNotification(Object(d.a)({title:"Video",message:"Invio del pacchetto video alla bici"},p)),v()}),[h]);return n.default.createElement(i.a,null,n.default.createElement(m.a,null,n.default.createElement(s.a,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:w,"aria-expanded":N},n.default.createElement("strong",null,"Video"))),n.default.createElement(o.a,{isOpen:!N},n.default.createElement(f.a,null,n.default.createElement(g.a,{action:"",encType:"multipart/form-data",className:"form-horizontal"},n.default.createElement(O.a,{row:!0},n.default.createElement(r.a,{md:"9"},n.default.createElement(j.a,null,"Registrazione")),n.default.createElement(r.a,{md:"3"},n.default.createElement(x.d,{className:"mx-1",variant:"pill",color:"primary",outline:"alt",label:!0,checked:a,onChange:z.bind(void 0)}))),n.default.createElement(O.a,{row:!0},n.default.createElement(r.a,{md:"5"},n.default.createElement(j.a,null,"File")),n.default.createElement(r.a,{md:"7"},n.default.createElement(k.a,{className:"text-center",type:"text",pattern:"*",placeholder:"Inserire nome del file video",onChange:I}))))),n.default.createElement(E.a,null,n.default.createElement(c.a,null,n.default.createElement(r.a,{md:"9"},n.default.createElement(s.a,{type:"submit","data-dismiss":"alert",size:"sl",color:"primary",onClick:R},n.default.createElement("i",{className:"fa fa-sign-out"})," Send"),"\u2002")))))},C=function(e){var t=e.dest,a=e.reloadStatus,E=Object(n.useState)(!1),v=Object(l.a)(E,2),g=v[0],O=v[1],j=Object(n.useRef)({dest:t,type:"6",value:""}),k=Object(n.useCallback)((function(){O(!g)}),[g]),x=Object(n.useCallback)((function(e){j.current.value=e,u.a.sendRasp(j.current),b.store.addNotification(Object(d.a)({title:"Raspberry",message:"Invio del pacchetto raspberry alla bici"},p)),a()}),[j]);return n.default.createElement(i.a,null,n.default.createElement(m.a,null,n.default.createElement(s.a,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:k,"aria-expanded":g},n.default.createElement("strong",null,"Raspberry"))),n.default.createElement(o.a,{isOpen:!g},n.default.createElement(f.a,null,n.default.createElement(c.a,null,n.default.createElement(r.a,{xs:"7",md:"8",xl:"9"},n.default.createElement(s.a,{type:"submit","data-dismiss":"alert",size:"sl",color:"danger",onClick:function(){return x("0")}},n.default.createElement("i",{className:"fa fa-power-off"})," Spegni")),n.default.createElement(r.a,{xs:"5",md:"4",xl:"3"},n.default.createElement(s.a,{className:"text-white",type:"submit","data-dismiss":"alert",size:"sl",color:"warning",onClick:function(){return x("1")}},n.default.createElement("i",{className:"fa fa-refresh"})," Riavvia"))))))},N=function(e){var t=e.settings,a=e.reloadStatus,v=Object(n.useState)(!1),y=Object(l.a)(v,2),C=y[0],N=y[1],S=Object(n.useRef)(t);Object(n.useEffect)((function(){S.current=t}),[t]);var h=Object(n.useCallback)((function(){N(!C)}),[C]),w=Object(n.useCallback)((function(e){var t=S.current,a=!t[e];t[e]=a}),[S]),z=Object(n.useCallback)((function(e,t){var a=S.current,l=t.target.value;t.target.validity.valid&&(a[e]=l)}),[S]),I=Object(n.useCallback)((function(){var e=S.current;e.update=function(){var e=new Date;return(e.toLocaleTimeString()+"_"+e.toLocaleDateString("it-IT",{month:"2-digit",day:"2-digit"})).replace("/","-")}(),u.a.saveSettings(e),b.store.addNotification(Object(d.a)({title:"Settings",message:"Invio del pacchetto settings alla bici"},p)),a()}),[S]);return n.default.createElement(i.a,null,n.default.createElement(m.a,null,n.default.createElement(s.a,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:h,"aria-expanded":C},n.default.createElement("strong",null,"Impostazioni"))),n.default.createElement(o.a,{isOpen:!C},n.default.createElement(f.a,null,n.default.createElement(g.a,{action:"",encType:"multipart/form-data",className:"form-horizontal"},n.default.createElement(O.a,{row:!0},n.default.createElement(r.a,{md:"9"},n.default.createElement(j.a,null,"Log")),n.default.createElement(r.a,{md:"3"},n.default.createElement(x.d,{className:"mx-1",variant:"pill",color:"primary",outline:"alt",label:!0,onChange:w.bind(void 0,"log"),checked:S.current.log}))),n.default.createElement(O.a,{row:!0},n.default.createElement(r.a,{md:"9"},n.default.createElement(j.a,null,"Csv")),n.default.createElement(r.a,{md:"3"},n.default.createElement(x.d,{className:"mx-1",variant:"pill",color:"primary",outline:"alt",label:!0,onChange:w.bind(void 0,"csv"),checked:S.current.csv}))),n.default.createElement(O.a,{row:!0},n.default.createElement(r.a,{md:"9"},n.default.createElement(j.a,null,"Ant")),n.default.createElement(r.a,{md:"3"},n.default.createElement(x.d,{className:"mx-1",variant:"pill",color:"primary",outline:"alt",label:!0,onChange:w.bind(void 0,"ant"),checked:S.current.ant}))),n.default.createElement(O.a,{row:!0},n.default.createElement(r.a,{md:"9"},n.default.createElement(j.a,null,"Potenza media")),n.default.createElement(r.a,{md:"3"},n.default.createElement(k.a,{className:"text-center",type:"number",min:"0",pattern:"",defaultValue:t.potenza,onChange:z.bind(void 0,"potenza")}))),n.default.createElement(O.a,{row:!0},n.default.createElement(r.a,{md:"9"},n.default.createElement(j.a,null,"Led Mode")),n.default.createElement(r.a,{md:"3"},n.default.createElement(k.a,{className:"text-center",type:"number",min:"0",pattern:"[0-9]*",defaultValue:S.current.led,onChange:z.bind(void 0,"led")}))),n.default.createElement(O.a,{row:!0},n.default.createElement(r.a,{md:"9"},n.default.createElement(j.a,null,"Circonferenza")),n.default.createElement(r.a,{md:"3"},n.default.createElement(k.a,{className:"text-center",type:"number",min:"0",pattern:"[0-9]*",defaultValue:S.current.circonferenza,onChange:z.bind(void 0,"circonferenza")}))),n.default.createElement(O.a,{row:!0},n.default.createElement(r.a,{md:"9"},n.default.createElement(j.a,null,"Valore calibrazione")),n.default.createElement(r.a,{md:"3"},n.default.createElement(k.a,{className:"text-center",type:"number",min:"0",pattern:"[0-9]*",defaultValue:S.current.calibration_value,onInput:z.bind(void 0,"calibration_value")}))),n.default.createElement(O.a,{row:!0},n.default.createElement(r.a,{md:"9"},n.default.createElement(j.a,null,"Run")),n.default.createElement(r.a,{md:"3"},n.default.createElement(k.a,{className:"text-center",type:"number",min:"0",pattern:"[0-9]*",defaultValue:S.current.run,onInput:z.bind(void 0,"run")}))))),n.default.createElement(E.a,null,n.default.createElement(c.a,null,n.default.createElement(r.a,{xs:"6",md:"9"},n.default.createElement(s.a,{type:"submit","data-dismiss":"alert",size:"sl",color:"success",onClick:I},n.default.createElement("i",{className:"fa fa-download"})," Save"),"\u2002"),n.default.createElement(r.a,{xs:"6",md:"3"},n.default.createElement("div",{className:"text-center"},t.update.replace("_","\n")))))))};t.default=function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),a=t[0],d=t[1],i=Object(n.useState)(),m=Object(l.a)(i,2),s=m[0],o=m[1],f=void 0===a||void 0===s;Object(n.useEffect)((function(){E()}),[]);var E=Object(n.useCallback)((function(){u.a.getSettings((function(e){JSON.stringify(e)!==JSON.stringify(s)&&o(e)})),u.a.getState((function(e){return d(e)}))}),[]),b=Object(n.useCallback)((function(){E()}),[E]);return f?function(){return n.default.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")}:n.default.createElement("article",null,n.default.createElement(c.a,null,n.default.createElement(r.a,{xs:"12",xl:"4"},n.default.createElement(v,{settings:s,state:a,reloadStatus:b})),n.default.createElement(r.a,{xs:"12",xl:"4"},n.default.createElement(y,{value:a.video_recording,dest:a.dest,reloadStatus:b}),n.default.createElement(C,{dest:a.dest,reloadStatus:b})),n.default.createElement(r.a,{xs:"12",xl:"4"},n.default.createElement(N,{settings:s,reloadStatus:b}))))}}}]);
//# sourceMappingURL=11.f774ab7b.chunk.js.map