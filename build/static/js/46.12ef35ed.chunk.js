(this.webpackJsonpmarta=this.webpackJsonpmarta||[]).push([[46],{549:function(e,t,a){"use strict";a.r(t);for(var s=a(328),r=a(96),i=a(97),n=a(99),l=a(98),o=a(100),c=a(1),d=a.n(c),h=a(304),m=a(305),p=a(306),u=a(307),b=a(490),v=a(396),g=a(361),y=Object(g.getStyle)("--success"),f=Object(g.getStyle)("--info"),E=Object(g.getStyle)("--warning"),x=Object(g.getStyle)("--danger"),O=[],w=0;w<200;w++)O.push("");var N={tooltips:{enabled:!1,custom:v.CustomTooltips,intersect:!0,mode:"index",position:"nearest",callbacks:{labelColor:function(e,t){return{backgroundColor:t.data.datasets[e.datasetIndex].borderColor}}}},maintainAspectRatio:!1,legend:{display:!0},scales:{xAxes:[{display:!1,gridLines:{drawOnChartArea:!0}}],yAxes:[{display:!0,ticks:{beginAtZero:!0}}]},elements:{point:{radius:0,hitRadius:10,hoverRadius:4,hoverBorderWidth:3},line:{tension:0}},animation:{duration:0}},j={labels:O,datasets:[{label:"Power",fill:!1,backgroundColor:f,borderColor:f,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]},{label:"Cadence",fill:!1,backgroundColor:y,borderColor:y,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]},{label:"Speed",fill:!1,backgroundColor:E,borderColor:E,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]},{label:"Heartrate",fill:!1,backgroundColor:x,borderColor:x,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]}]},k=[];for(w=0;w<50;w++)k.push("");var C={labels:k,datasets:[{backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[]}]},P={tooltips:{enabled:!1},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{beginAtZero:!0,max:450}}]},elements:{line:{borderWidth:2},point:{radius:0,hitRadius:10,hoverRadius:0}},animation:{duration:0}},A={labels:k,datasets:[{backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[]}]},D={tooltips:{enabled:!1},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{min:50,max:150}}]},elements:{line:{borderWidth:2},point:{radius:0,hitRadius:10,hoverRadius:0}},animation:{duration:0}},S={labels:k,datasets:[{backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[]}]},R={tooltips:{enabled:!1},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{beginAtZero:!0,max:160}}]},elements:{line:{borderWidth:2},point:{radius:0,hitRadius:10,hoverRadius:0}},animation:{duration:0}},H={labels:k,datasets:[{backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[]}]},W={tooltips:{enabled:!1},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{min:100,max:200}}]},elements:{line:{borderWidth:2},point:{radius:0,hitRadius:10,hoverRadius:0}},animation:{duration:0}},B=a(362);function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var z=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(n.a)(this,Object(l.a)(t).call(this,e))).data=a.props.data,a.history=a.props.history,a.state=a.props.state,void 0!==a.history&&a.manageHistory(a.state,a.history),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"manageHistory",value:function(e,t){e.datasets[0].data=t.power,e.datasets[1].data=t.cadence,e.datasets[2].data=t.speed,e.datasets[3].data=t.heartrate}},{key:"componentDidUpdate",value:function(){if(this.data!==this.props.data){this.data=this.props.data;for(var e=this.state.datasets[0],t=this.state.datasets[1],a=this.state.datasets[2],s=this.state.datasets[3],r=this.state.labels,i=[],n=[],l=[],o=[],c=1;c<this.state.labels.length;c++){var d=e.data[c],h=t.data[c],m=a.data[c],p=s.data[c];void 0!==d?(i.push(d),n.push(h),l.push(m),o.push(p)):(i.unshift(d),n.unshift(h),l.unshift(m),o.unshift(p))}r.shift(),r.push(""),i.push(this.data.power),n.push(this.data.cadence),l.push(this.data.speed),o.push(this.data.heartrate),this.setState(T({},this.state,{datasets:[T({},e,{data:i}),T({},t,{data:n}),T({},a,{data:l}),T({},s,{data:o})]}))}}},{key:"render",value:function(){return d.a.createElement(B.a,{data:this.state,options:this.props.opts})}}]),t}(c.Component),J=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(n.a)(this,Object(l.a)(t).call(this,e))).state=a.props.state,a.data=a.props.data,a.value=a.props.value,a.history=a.props.history,void 0!==a.history&&a.manageHistory(a.state,a.history),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"manageHistory",value:function(e,t){e.datasets[0].data=t[this.value]}},{key:"componentDidUpdate",value:function(){if(this.data!==this.props.data){this.data=this.props.data;for(var e=this.state.datasets[0],t=this.state.labels,a=[],s=1;s<this.state.labels.length;s++){var r=e.data[s];void 0!==r?a.push(r):a.unshift(r)}t.shift(),t.push("");var i=this.data[this.value];a.push(i),this.setState(T({},this.state,{datasets:[T({},e,{data:a})]}))}}},{key:"render",value:function(){return d.a.createElement(B.a,{data:this.state,options:this.props.opts})}}]),t}(c.Component),_=a(103),I=a(493),U=a(492),Z=a(491);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function L(e){return e.showExtra?d.a.createElement(h.a,null,d.a.createElement(m.a,{xs:"12",sm:"6",lg:"4"},d.a.createElement(p.a,{className:"text-white bg-primary"},d.a.createElement(u.a,{className:"pb-2"},d.a.createElement("div",null,"Time [s]"),d.a.createElement("div",{className:"text-value text-center"},e.time)))),d.a.createElement(m.a,{xs:"12",sm:"6",lg:"2"},d.a.createElement(p.a,{className:"text-white bg-dark"},d.a.createElement(u.a,{className:"pb-2"},d.a.createElement("div",null,"Gear"),d.a.createElement("div",{className:"text-value text-center"},e.gear)))),d.a.createElement(m.a,{xs:"12",sm:"6",lg:"2"},d.a.createElement(p.a,{className:"text-dark bg-secondary"},d.a.createElement(u.a,{className:"pb-2"},d.a.createElement("div",null,"Distance [m]"),d.a.createElement("div",{className:"text-value text-center"},e.distance)))),d.a.createElement(m.a,{xs:"12",sm:"6",lg:"4"},d.a.createElement(p.a,{className:"text-white bg-purple"},d.a.createElement(u.a,{className:"pb-2"},d.a.createElement(h.a,null,d.a.createElement(m.a,{xs:"4",sm:"4",lg:"4"},d.a.createElement("div",{className:"text-center"},"Temp [\xb0C]"),d.a.createElement("div",{className:"text-value text-center"},e.weather.temperature)),d.a.createElement(m.a,{xs:"4",sm:"4",lg:"4"},d.a.createElement("div",{className:"text-center"},"Humidity [%]"),d.a.createElement("div",{className:"text-value text-center"},e.weather.humidity)),d.a.createElement(m.a,{xs:"4",sm:"4",lg:"4"},d.a.createElement("div",{className:"text-center"},"Press [hPa]"),d.a.createElement("div",{className:"text-value text-center"},e.weather.pressure))))))):null}var G=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(n.a)(this,Object(l.a)(t).call(this,e)))._isMounted=!1,a.loading=function(){return d.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")},a.state={data:"",history:"",weather:"",showExtra:!0},_.a.getHistory((function(e){a.history(e)})),_.a.requestData(),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"history",value:function(e){var t=["heartrate","cadence","power","speed"],a={heartrate:[],cadence:[],power:[],speed:[]},r={heartrate:[],cadence:[],power:[],speed:[]},i=e.reverse(),n=i.slice(0,200),l=i.slice(0,50);n.reverse(),l.reverse();for(var o=0;o<n.length&&o<200;o++)for(var c=0;c<t.length;c++)a[t[c]].push(JSON.parse(n[o])[t[c]]),o<50&&r[t[c]].push(JSON.parse(l[o])[t[c]]);var d=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.state,{history:{chart:a,miniChart:r}});this.setState(d)}},{key:"updateData",value:function(e){this.setState({data:e}),this._isMounted&&setTimeout((function(){_.a.requestData()}),300)}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,_.a.getHistory((function(t){e.history(t)})),_.a.getData((function(t){e.updateData(t)})),_.a.getWeather((function(t){return e.setState({weather:t})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return""===this.state.history?null:d.a.createElement("div",{className:"animated fadeIn"},d.a.createElement(h.a,null,d.a.createElement(m.a,{xs:"12",sm:"6",lg:"3"},d.a.createElement(p.a,{className:"text-white bg-info"},d.a.createElement(u.a,{className:"pb-0"},d.a.createElement(b.a,{id:"card1",className:"float-right"},d.a.createElement(Z.a,{size:"1.5em"})),d.a.createElement("div",{className:"text-value"},this.state.data.power),d.a.createElement("div",null,"Power [W]")),d.a.createElement("div",{className:"chart-wrapper",style:{height:"60px"}},d.a.createElement(J,{state:C,opts:P,value:"power",data:this.state.data,history:this.state.history.miniChart})))),d.a.createElement(m.a,{xs:"12",sm:"6",lg:"3"},d.a.createElement(p.a,{className:"text-white bg-success"},d.a.createElement(u.a,{className:"pb-0"},d.a.createElement(b.a,{id:"card2",className:"float-right"},d.a.createElement(U.a,{size:"1.5em"})),d.a.createElement("div",{className:"text-value"},this.state.data.cadence),d.a.createElement("div",null,"Cadence [rpm]")),d.a.createElement("div",{className:"chart-wrapper",style:{height:"60px"}},d.a.createElement(J,{state:A,opts:D,value:"cadence",data:this.state.data,history:this.state.history.miniChart})))),d.a.createElement(m.a,{xs:"12",sm:"6",lg:"3"},d.a.createElement(p.a,{className:"text-white bg-warning"},d.a.createElement(u.a,{className:"pb-0"},d.a.createElement(b.a,{id:"card3",className:"float-right"},d.a.createElement(U.b,{size:"1.5em"})),d.a.createElement("div",{className:"text-value"},this.state.data.speed),d.a.createElement("div",null,"Speed [km/h]")),d.a.createElement("div",{className:"chart-wrapper",style:{height:"60px"}},d.a.createElement(J,{state:S,opts:R,value:"speed",data:this.state.data,history:this.state.history.miniChart})))),d.a.createElement(m.a,{xs:"12",sm:"6",lg:"3"},d.a.createElement(p.a,{className:"text-white bg-danger"},d.a.createElement(u.a,{className:"pb-0"},d.a.createElement(b.a,{id:"card4",className:"float-right"},d.a.createElement(I.a,{size:"1.5em"})),d.a.createElement("div",{className:"text-value"},this.state.data.heartrate),d.a.createElement("div",null,"Heartrate [bpm]")),d.a.createElement("div",{className:"chart-wrapper",style:{height:"60px"}},d.a.createElement(J,{state:H,opts:W,value:"heartrate",data:this.state.data,history:this.state.history.miniChart}))))),d.a.createElement(h.a,null,d.a.createElement(m.a,null,d.a.createElement(p.a,null,d.a.createElement(u.a,null,d.a.createElement("div",{className:"chart-wrapper",style:{height:"400px",marginTop:"0px"}},d.a.createElement(z,{state:j,opts:N,data:this.state.data,history:this.state.history.chart})))))),d.a.createElement(L,{showExtra:this.state.showExtra,gear:this.state.data.gear,distance:this.state.data.distance,time:this.state.data.time,weather:this.state.weather}))}}]),t}(c.Component);t.default=G}}]);
//# sourceMappingURL=46.12ef35ed.chunk.js.map