(this.webpackJsonpmarta=this.webpackJsonpmarta||[]).push([[46],{824:function(e,t,a){"use strict";a.r(t);for(var s=a(572),r=a(143),i=a(144),n=a(146),l=a(145),o=a(147),c=a(2),d=a.n(c),h=a(558),m=a(559),u=a(561),p=a(562),b=a(746),v=a(652),E=a(619),g=Object(E.getStyle)("--success"),y=Object(E.getStyle)("--info"),f=Object(E.getStyle)("--warning"),x=Object(E.getStyle)("--danger"),N=[],w=0;w<200;w++)N.push("");var C={tooltips:{enabled:!1,custom:v.CustomTooltips,intersect:!0,mode:"index",position:"nearest",callbacks:{labelColor:function(e,t){return{backgroundColor:t.data.datasets[e.datasetIndex].borderColor}}}},maintainAspectRatio:!1,legend:{display:!0},scales:{xAxes:[{display:!1,gridLines:{drawOnChartArea:!0}}],yAxes:[{display:!0,ticks:{beginAtZero:!0}}]},elements:{point:{radius:0,hitRadius:10,hoverRadius:4,hoverBorderWidth:3},line:{tension:0}},animation:{duration:0}},k={labels:N,datasets:[{label:"Power",fill:!1,backgroundColor:y,borderColor:y,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]},{label:"Cadence",fill:!1,backgroundColor:g,borderColor:g,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]},{label:"Speed",fill:!1,backgroundColor:f,borderColor:f,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]},{label:"Heartrate",fill:!1,backgroundColor:x,borderColor:x,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]}]},O=[];for(w=0;w<50;w++)O.push("");var j={labels:O,datasets:[{backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[]}]},A={tooltips:{enabled:!1},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{beginAtZero:!0,max:450}}]},elements:{line:{borderWidth:2},point:{radius:0,hitRadius:10,hoverRadius:0}},animation:{duration:0}},R={labels:O,datasets:[{backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[]}]},H={tooltips:{enabled:!1},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{min:50,max:150}}]},elements:{line:{borderWidth:2},point:{radius:0,hitRadius:10,hoverRadius:0}},animation:{duration:0}},S={labels:O,datasets:[{backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[]}]},W={tooltips:{enabled:!1},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{beginAtZero:!0,max:160}}]},elements:{line:{borderWidth:2},point:{radius:0,hitRadius:10,hoverRadius:0}},animation:{duration:0}},D={labels:O,datasets:[{backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[]}]},B={tooltips:{enabled:!1},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{min:100,max:200}}]},elements:{line:{borderWidth:2},point:{radius:0,hitRadius:10,hoverRadius:0}},animation:{duration:0}},M=a(601),T=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(n.a)(this,Object(l.a)(t).call(this,e))).data=a.props.data,a.history=a.props.history,a.state=k,void 0!==a.history&&a.manageHistory(a.state,a.history),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"manageHistory",value:function(e,t){e.datasets[0].data=t.power,e.datasets[1].data=t.cadence,e.datasets[2].data=t.speed,e.datasets[3].data=t.heartrate}},{key:"componentDidUpdate",value:function(){if(this.data!==this.props.data){this.data=this.props.data;for(var e=this.state.datasets[0],t=this.state.datasets[1],a=this.state.datasets[2],r=this.state.datasets[3],i=this.state.labels,n=[],l=[],o=[],c=[],d=1;d<this.state.labels.length;d++){var h=e.data[d],m=t.data[d],u=a.data[d],p=r.data[d];void 0!==h?(n.push(h),l.push(m),o.push(u),c.push(p)):(n.unshift(h),l.unshift(m),o.unshift(u),c.unshift(p))}i.shift(),i.push(""),n.push(this.data.power),l.push(this.data.cadence),o.push(this.data.speed),c.push(this.data.heartrate),this.setState(Object(s.a)({},this.state,{datasets:[Object(s.a)({},e,{data:n}),Object(s.a)({},t,{data:l}),Object(s.a)({},a,{data:o}),Object(s.a)({},r,{data:c})]}))}}},{key:"render",value:function(){return d.a.createElement(M.a,{data:this.state,options:C})}}]),t}(c.Component),z=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(n.a)(this,Object(l.a)(t).call(this,e))).state=a.props.state,a.data=a.props.data,a.value=a.props.value,a.history=a.props.history,void 0!==a.history&&a.manageHistory(a.state,a.history),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"manageHistory",value:function(e,t){e.datasets[0].data=t[this.value]}},{key:"componentDidUpdate",value:function(){if(this.data!==this.props.data){this.data=this.props.data;for(var e=this.state.datasets[0],t=this.state.labels,a=[],r=1;r<this.state.labels.length;r++){var i=e.data[r];void 0!==i?a.push(i):a.unshift(i)}t.shift(),t.push("");var n=this.data[this.value];a.push(n),this.setState(Object(s.a)({},this.state,{datasets:[Object(s.a)({},e,{data:a})]}))}}},{key:"render",value:function(){return d.a.createElement(M.a,{data:this.state,options:this.props.opts})}}]),t}(c.Component),J=function(e){var t=e.data,a=e.history;return d.a.createElement(z,{state:j,opts:A,value:"power",data:t,history:a})},P=function(e){var t=e.data,a=e.history;return d.a.createElement(z,{state:R,opts:H,value:"cadence",data:t,history:a})},_=function(e){var t=e.data,a=e.history;return d.a.createElement(z,{state:S,opts:W,value:"speed",data:t,history:a})},U=function(e){var t=e.data,a=e.history;return d.a.createElement(z,{state:D,opts:B,value:"heartrate",data:t,history:a})},Z=a(150),q=a(749),I=a(748),L=a(747),G=function(e){return e.showExtra?d.a.createElement(h.a,null,d.a.createElement(m.a,{xs:"12",sm:"6",lg:"4"},d.a.createElement(u.a,{className:"text-white bg-primary"},d.a.createElement(p.a,{className:"pb-2"},d.a.createElement("div",null,"Time [s]"),d.a.createElement("div",{className:"text-value text-center"},e.time)))),d.a.createElement(m.a,{xs:"12",sm:"6",lg:"2"},d.a.createElement(u.a,{className:"text-white bg-dark"},d.a.createElement(p.a,{className:"pb-2"},d.a.createElement("div",null,"Gear"),d.a.createElement("div",{className:"text-value text-center"},e.gear)))),d.a.createElement(m.a,{xs:"12",sm:"6",lg:"2"},d.a.createElement(u.a,{className:"text-dark bg-secondary"},d.a.createElement(p.a,{className:"pb-2"},d.a.createElement("div",null,"Distance [m]"),d.a.createElement("div",{className:"text-value text-center"},e.distance)))),d.a.createElement(m.a,{xs:"12",sm:"6",lg:"4"},d.a.createElement(u.a,{className:"text-white bg-purple"},d.a.createElement(p.a,{className:"pb-2"},d.a.createElement(h.a,null,d.a.createElement(m.a,{xs:"4",sm:"4",lg:"4"},d.a.createElement("div",{className:"text-center"},"Temp [\xb0C]"),d.a.createElement("div",{className:"text-value text-center"},e.weather.temperature)),d.a.createElement(m.a,{xs:"4",sm:"4",lg:"4"},d.a.createElement("div",{className:"text-center"},"Humidity [%]"),d.a.createElement("div",{className:"text-value text-center"},e.weather.humidity)),d.a.createElement(m.a,{xs:"4",sm:"4",lg:"4"},d.a.createElement("div",{className:"text-center"},"Press [hPa]"),d.a.createElement("div",{className:"text-value text-center"},e.weather.pressure))))))):null},F=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(n.a)(this,Object(l.a)(t).call(this,e)))._isMounted=!1,a.loading=function(){return d.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")},a.state={data:"",history:"",weather:"",showExtra:!0},Z.a.getHistory((function(e){a.history(e)})),Z.a.requestData(),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"history",value:function(e){var t=["heartrate","cadence","power","speed"],a={heartrate:[],cadence:[],power:[],speed:[]},r={heartrate:[],cadence:[],power:[],speed:[]},i=e.reverse(),n=i.slice(0,200),l=i.slice(0,50);n.reverse(),l.reverse();for(var o=0;o<n.length&&o<200;o++)for(var c=0;c<t.length;c++)a[t[c]].push(JSON.parse(n[o])[t[c]]),o<50&&r[t[c]].push(JSON.parse(l[o])[t[c]]);var d=Object(s.a)({},this.state,{history:{chart:a,miniChart:r}});this.setState(d)}},{key:"updateData",value:function(e){this.setState({data:e}),this._isMounted&&setTimeout((function(){Z.a.requestData()}),300)}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,Z.a.getHistory((function(t){e.history(t)})),Z.a.getData((function(t){e.updateData(t)})),Z.a.getWeather((function(t){return e.setState({weather:t})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return""===this.state.history?null:d.a.createElement("article",null,d.a.createElement(h.a,null,d.a.createElement(m.a,{xs:"12",sm:"6",lg:"3"},d.a.createElement(u.a,{className:"text-white bg-info"},d.a.createElement(p.a,{className:"pb-0"},d.a.createElement(b.a,{id:"card1",className:"float-right"},d.a.createElement(L.a,{size:"1.5em"})),d.a.createElement("div",{className:"text-value"},this.state.data.power),d.a.createElement("div",null,"Power [W]")),d.a.createElement("div",{className:"chart-wrapper",style:{height:"60px"}},d.a.createElement(J,{data:this.state.data,history:this.state.history.miniChart})))),d.a.createElement(m.a,{xs:"12",sm:"6",lg:"3"},d.a.createElement(u.a,{className:"text-white bg-success"},d.a.createElement(p.a,{className:"pb-0"},d.a.createElement(b.a,{id:"card2",className:"float-right"},d.a.createElement(I.a,{size:"1.5em"})),d.a.createElement("div",{className:"text-value"},this.state.data.cadence),d.a.createElement("div",null,"Cadence [rpm]")),d.a.createElement("div",{className:"chart-wrapper",style:{height:"60px"}},d.a.createElement(P,{data:this.state.data,history:this.state.history.miniChart})))),d.a.createElement(m.a,{xs:"12",sm:"6",lg:"3"},d.a.createElement(u.a,{className:"text-white bg-warning"},d.a.createElement(p.a,{className:"pb-0"},d.a.createElement(b.a,{id:"card3",className:"float-right"},d.a.createElement(I.b,{size:"1.5em"})),d.a.createElement("div",{className:"text-value"},this.state.data.speed),d.a.createElement("div",null,"Speed [km/h]")),d.a.createElement("div",{className:"chart-wrapper",style:{height:"60px"}},d.a.createElement(_,{data:this.state.data,history:this.state.history.miniChart})))),d.a.createElement(m.a,{xs:"12",sm:"6",lg:"3"},d.a.createElement(u.a,{className:"text-white bg-danger"},d.a.createElement(p.a,{className:"pb-0"},d.a.createElement(b.a,{id:"card4",className:"float-right"},d.a.createElement(q.a,{size:"1.5em"})),d.a.createElement("div",{className:"text-value"},this.state.data.heartrate),d.a.createElement("div",null,"Heartrate [bpm]")),d.a.createElement("div",{className:"chart-wrapper",style:{height:"60px"}},d.a.createElement(U,{data:this.state.data,history:this.state.history.miniChart}))))),d.a.createElement(h.a,null,d.a.createElement(m.a,null,d.a.createElement(u.a,null,d.a.createElement(p.a,null,d.a.createElement("div",{className:"chart-wrapper",style:{height:"370px",marginTop:0}},d.a.createElement(T,{data:this.state.data,history:this.state.history.chart})))))),d.a.createElement(G,{showExtra:this.state.showExtra,gear:this.state.data.gear,distance:this.state.data.distance,time:this.state.data.time,weather:this.state.weather}))}}]),t}(c.Component);t.default=F}}]);
//# sourceMappingURL=46.252ccce5.chunk.js.map