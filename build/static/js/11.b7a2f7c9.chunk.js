(this.webpackJsonpmarta=this.webpackJsonpmarta||[]).push([[11],{739:function(e,t,a){"use strict";a.r(t);var n=a(142),l=a(143),s=a(145),i=a(144),r=a(146),c=a(2),o=a.n(c),m=a(565),u=a(566),d=a(147),p=a(554),h=a(712),E=a(734),g=a(582),f=a(743),b=a(713),v=a(735),S=a(148),y=(a(717),a(718),{type:"info",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],width:300,dismiss:{duration:2500,onScreen:!0,pauseOnHover:!0,showIcon:!0}}),O=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).toggle=function(){a.setState({collapse:!a.state.collapse})},a.toggleButton=function(){S.store.addNotification(Object(p.a)({},y,{title:"State",message:"Aggiornato lo status",type:"success"})),a.props.reloadStatus()},a.state={status:"",collapse:!1},a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(){this.updateStatus()}},{key:"componentDidMount",value:function(){this.updateStatus()}},{key:"updateStatus",value:function(){var e=JSON.parse(JSON.stringify(this.props.state)),t=JSON.parse(JSON.stringify(this.props.settings));delete e.dest,delete e.type,delete t.dest,delete t.type;var a=JSON.stringify(e,null,1).replace(/\{|\}|"|,|/g,"").replace("\n",""),n=JSON.stringify(t,null,1).replace(/\{|\}|"|,/g,"");this.setState({status:a+n})}},{key:"render",value:function(){return o.a.createElement(h.a,null,o.a.createElement(E.a,null,o.a.createElement(g.a,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:this.toggle,"aria-expanded":this.state.collapse},o.a.createElement("strong",null,"Status"))),o.a.createElement(f.a,{isOpen:!this.state.collapse},o.a.createElement(b.a,null,o.a.createElement("pre",null,o.a.createElement("code",null,this.state.status))),o.a.createElement(v.a,null,o.a.createElement(g.a,{className:"text-white bg-cyan",type:"submit",size:"sl",onClick:this.toggleButton},o.a.createElement("i",{className:"fa fa-refresh"})," Reload"))))}}]),t}(c.Component),x=a(736),N=a(737),k=a(738),w=a(581),j=a(564),C=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).handleSwitch=function(){a.inputVideo.value=!a.inputVideo.value},a.handleText=function(e){var t=e.target.value;e.target.validity.valid&&(a.inputVideo.name=t)},a.toggle=function(){a.setState({collapse:!a.state.collapse})},a.sendVideo=function(){S.store.addNotification(Object(p.a)({title:"Video",message:"Invio del pacchetto video alla bici"},y)),d.a.sendVideo(a.inputVideo),a.props.reloadStatus()},a.state={collapse:!1},a.inputVideo={dest:a.props.dest,type:"7",value:a.props.value,name:""},a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(h.a,null,o.a.createElement(E.a,null,o.a.createElement(g.a,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:this.toggle,"aria-expanded":this.state.collapse},o.a.createElement("strong",null,"Video"))),o.a.createElement(f.a,{isOpen:!this.state.collapse},o.a.createElement(b.a,null,o.a.createElement(x.a,{action:"",encType:"multipart/form-data",className:"form-horizontal"},o.a.createElement(N.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(k.a,null,"Registrazione")),o.a.createElement(u.a,{md:"3"},o.a.createElement(j.d,{className:"mx-1",variant:"pill",color:"primary",outline:"alt",label:!0,checked:this.props.value,onChange:this.handleSwitch}))),o.a.createElement(N.a,{row:!0},o.a.createElement(u.a,{md:"5"},o.a.createElement(k.a,null,"File")),o.a.createElement(u.a,{md:"7"},o.a.createElement(w.a,{className:"text-center",type:"text",pattern:"*",placeholder:"Inserire nome del file video",onChange:this.handleText}))))),o.a.createElement(v.a,null,o.a.createElement(m.a,null,o.a.createElement(u.a,{md:"9"},o.a.createElement(g.a,{type:"submit","data-dismiss":"alert",size:"sl",color:"primary",onClick:this.sendVideo},o.a.createElement("i",{className:"fa fa-sign-out"})," Send"),"\u2002")))))}}]),t}(c.Component),V=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).toggle=function(){a.setState({collapse:!a.state.collapse})},a.sendRasp=function(e){S.store.addNotification(Object(p.a)({title:"Raspberry",message:"Invio del pacchetto raspberry alla bici"},y)),a.inputRasp.value=e,d.a.sendRasp(a.inputRasp),a.props.reloadStatus()},a.state={collapse:!1},a.inputRasp={dest:a.props.dest,type:"6",value:""},a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(h.a,null,o.a.createElement(E.a,null,o.a.createElement(g.a,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:this.toggle,"aria-expanded":this.state.collapse},o.a.createElement("strong",null,"Raspberry"))),o.a.createElement(f.a,{isOpen:!this.state.collapse},o.a.createElement(b.a,null,o.a.createElement(m.a,null,o.a.createElement(u.a,{xs:"7",md:"8",xl:"9"},o.a.createElement(g.a,{type:"submit","data-dismiss":"alert",size:"sl",color:"danger",onClick:this.sendRasp.bind(this,"0")},o.a.createElement("i",{className:"fa fa-power-off"})," Spegni")),o.a.createElement(u.a,{xs:"5",md:"4",xl:"3"},o.a.createElement(g.a,{className:"text-white",type:"submit","data-dismiss":"alert",size:"sl",color:"warning",onClick:this.sendRasp.bind(this,"1")},o.a.createElement("i",{className:"fa fa-refresh"})," Riavvia"))))))}}]),t}(c.Component),z=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).handleSwitch=function(e){var t=a.inputSettings,n=!t[e];t[e]=n},a.handleText=function(e,t){var n=a.inputSettings,l=t.target.value;t.target.validity.valid&&(n[e]=l)},a.toggle=function(){a.setState({collapse:!a.state.collapse})},a.saveSettings=function(){S.store.addNotification(Object(p.a)({title:"Settings",message:"Invio del pacchetto settings alla bici"},y)),a.inputSettings.update=function(){var e=new Date;return(e.toLocaleTimeString()+"_"+e.toLocaleDateString("it-IT",{month:"2-digit",day:"2-digit"})).replace("/","-")}(),d.a.saveSettings(a.inputSettings),a.props.reloadStatus()},a.state={collapse:!1},a.inputSettings=JSON.parse(JSON.stringify(a.props.settings)),a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(h.a,null,o.a.createElement(E.a,null,o.a.createElement(g.a,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:this.toggle,"aria-expanded":this.state.collapse},o.a.createElement("strong",null,"Impostazioni"))),o.a.createElement(f.a,{isOpen:!this.state.collapse},o.a.createElement(b.a,null,o.a.createElement(x.a,{action:"",encType:"multipart/form-data",className:"form-horizontal"},o.a.createElement(N.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(k.a,null,"Log")),o.a.createElement(u.a,{md:"3"},o.a.createElement(j.d,{className:"mx-1",variant:"pill",color:"primary",outline:"alt",label:!0,onChange:this.handleSwitch.bind(this,"log"),checked:this.props.settings.log}))),o.a.createElement(N.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(k.a,null,"Csv")),o.a.createElement(u.a,{md:"3"},o.a.createElement(j.d,{className:"mx-1",variant:"pill",color:"primary",outline:"alt",label:!0,onChange:this.handleSwitch.bind(this,"csv"),checked:this.props.settings.csv}))),o.a.createElement(N.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(k.a,null,"Ant")),o.a.createElement(u.a,{md:"3"},o.a.createElement(j.d,{className:"mx-1",variant:"pill",color:"primary",outline:"alt",label:!0,onChange:this.handleSwitch.bind(this,"ant"),checked:this.props.settings.ant}))),o.a.createElement(N.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(k.a,null,"Potenza media")),o.a.createElement(u.a,{md:"3"},o.a.createElement(w.a,{className:"text-center",type:"number",min:"0",pattern:"",defaultValue:this.props.settings.potenza,onChange:this.handleText.bind(this,"potenza")}))),o.a.createElement(N.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(k.a,null,"Led Mode")),o.a.createElement(u.a,{md:"3"},o.a.createElement(w.a,{className:"text-center",type:"number",min:"0",pattern:"[0-9]*",defaultValue:this.props.settings.led,onChange:this.handleText.bind(this,"led")}))),o.a.createElement(N.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(k.a,null,"Circonferenza")),o.a.createElement(u.a,{md:"3"},o.a.createElement(w.a,{className:"text-center",type:"number",min:"0",pattern:"[0-9]*",defaultValue:this.props.settings.circonferenza,onChange:this.handleText.bind(this,"circonferenza")}))),o.a.createElement(N.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(k.a,null,"Valore calibrazione")),o.a.createElement(u.a,{md:"3"},o.a.createElement(w.a,{className:"text-center",type:"number",min:"0",pattern:"[0-9]*",defaultValue:this.props.settings.calibration_value,onInput:this.handleText.bind(this,"calibration_value")}))),o.a.createElement(N.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(k.a,null,"Run")),o.a.createElement(u.a,{md:"3"},o.a.createElement(w.a,{className:"text-center",type:"number",min:"0",pattern:"[0-9]*",defaultValue:this.props.settings.run,onInput:this.handleText.bind(this,"run")}))))),o.a.createElement(v.a,null,o.a.createElement(m.a,null,o.a.createElement(u.a,{xs:"6",md:"9"},o.a.createElement(g.a,{type:"submit","data-dismiss":"alert",size:"sl",color:"success",onClick:this.saveSettings},o.a.createElement("i",{className:"fa fa-download"})," Save"),"\u2002"),o.a.createElement(u.a,{xs:"6",md:"3"},o.a.createElement("div",{className:"text-center"},this.props.settings.update.replace("_","\n")))))))}}]),t}(c.Component),R=(c.Component,function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e)))._isMounted=!1,a.updateView=function(){a.reloadStatus()},a.loading=function(){return o.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")},a.state={settings:"",state:"",visible:!1,visible_video:!1,visible_rasp:!1},a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.reloadStatus()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"reloadStatus",value:function(){var e=this;d.a.getSettings((function(t){JSON.stringify(e.state.settings)!==JSON.stringify(t)&&e.setState({settings:t})})),d.a.getState((function(t){e.setState({state:t})}))}},{key:"render",value:function(){return""===this.state.state||""===this.state.settings?null:o.a.createElement("article",null,o.a.createElement(m.a,null,o.a.createElement(u.a,{xs:"12",xl:"4"},o.a.createElement(O,{settings:this.state.settings,state:this.state.state,reloadStatus:this.updateView})),o.a.createElement(u.a,{xs:"12",xl:"4"},o.a.createElement(C,{value:this.state.state.video_recording,dest:this.state.state.dest,reloadStatus:this.updateView}),o.a.createElement(V,{dest:this.state.state.dest,reloadStatus:this.updateView})),o.a.createElement(u.a,{xs:"12",xl:"4"},o.a.createElement(z,{settings:this.state.settings,reloadStatus:this.updateView}))))}}]),t}(c.Component));t.default=R}}]);
//# sourceMappingURL=11.b7a2f7c9.chunk.js.map