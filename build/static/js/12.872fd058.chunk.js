(this.webpackJsonpmarta=this.webpackJsonpmarta||[]).push([[12],{740:function(e,t,a){"use strict";a.r(t);for(var s=a(554),r=a(142),i=a(143),n=a(145),l=a(144),o=a(146),d=a(2),c=a.n(d),h=a(565),m=a(566),u=a(712),p=a(713),b=a(733),v=a(617),g=a(618),E=Object(g.getStyle)("--success"),y=Object(g.getStyle)("--info"),f=Object(g.getStyle)("--warning"),x=Object(g.getStyle)("--danger"),N=[],C=0;C<200;C++)N.push("");for(var k={tooltips:{enabled:!1,custom:v.CustomTooltips,intersect:!0,mode:"index",position:"nearest",callbacks:{labelColor:function(e,t){return{backgroundColor:t.data.datasets[e.datasetIndex].borderColor}}}},maintainAspectRatio:!1,legend:{display:!0},scales:{xAxes:[{display:!1,gridLines:{drawOnChartArea:!0}}],yAxes:[{display:!0,ticks:{beginAtZero:!0}}]},elements:{point:{radius:0,hitRadius:10,hoverRadius:4,hoverBorderWidth:3},line:{tension:0}},animation:{duration:0}},w={labels:N,datasets:[{label:"Power",fill:!1,backgroundColor:y,borderColor:y,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]},{label:"Cadence",fill:!1,backgroundColor:E,borderColor:E,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]},{label:"Speed",fill:!1,backgroundColor:f,borderColor:f,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]},{label:"Heartrate",fill:!1,backgroundColor:x,borderColor:x,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]}]},O=[],j=0;j<50;j++)O.push("");var A={labels:O,datasets:[{backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[]}]},R={tooltips:{enabled:!1},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{beginAtZero:!0,max:450}}]},elements:{line:{borderWidth:2},point:{radius:0,hitRadius:10,hoverRadius:0}},animation:{duration:0}},S={labels:O,datasets:[{backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[]}]},H={tooltips:{enabled:!1},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{min:50,max:150}}]},elements:{line:{borderWidth:2},point:{radius:0,hitRadius:10,hoverRadius:0}},animation:{duration:0}},W={labels:O,datasets:[{backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[]}]},D={tooltips:{enabled:!1},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{beginAtZero:!0,max:160}}]},elements:{line:{borderWidth:2},point:{radius:0,hitRadius:10,hoverRadius:0}},animation:{duration:0}},B={labels:O,datasets:[{backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[]}]},M={tooltips:{enabled:!1},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{min:100,max:200}}]},elements:{line:{borderWidth:2},point:{radius:0,hitRadius:10,hoverRadius:0}},animation:{duration:0}},T=a(583),z=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(n.a)(this,Object(l.a)(t).call(this,e))).data=a.props.data,a.history=a.props.history,a.state=w,void 0!==a.history&&a.manageHistory(a.state,a.history),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"manageHistory",value:function(e,t){for(var a=1;a<this.state.labels.length;a++){var s=t.power[a],r=t.cadence[a],i=t.speed[a],n=t.heartrate[a];void 0!==s?(e.datasets[0].data.push(s),e.datasets[1].data.push(r),e.datasets[2].data.push(i),e.datasets[3].data.push(n)):(e.datasets[0].data.unshift(s),e.datasets[1].data.unshift(r),e.datasets[2].data.unshift(i),e.datasets[3].data.unshift(n))}}},{key:"componentDidUpdate",value:function(){if(this.data!==this.props.data){this.data=this.props.data;for(var e=this.state.datasets[0],t=this.state.datasets[1],a=this.state.datasets[2],r=this.state.datasets[3],i=this.state.labels,n=[],l=[],o=[],d=[],c=1;c<i.length;c++){var h=e.data[c],m=t.data[c],u=a.data[c],p=r.data[c];void 0!==h?(n.push(h),l.push(m),o.push(u),d.push(p)):(n.unshift(h),l.unshift(m),o.unshift(u),d.unshift(p))}i.shift(),i.push(""),n.push(this.data.power),l.push(this.data.cadence),o.push(this.data.speed),d.push(this.data.heartrate),this.setState(Object(s.a)({},this.state,{datasets:[Object(s.a)({},e,{data:n}),Object(s.a)({},t,{data:l}),Object(s.a)({},a,{data:o}),Object(s.a)({},r,{data:d})]}))}}},{key:"render",value:function(){return c.a.createElement(T.a,{data:this.state,options:k})}}]),t}(d.Component),J=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(n.a)(this,Object(l.a)(t).call(this,e))).data=a.props.data,a.value=a.props.value,a.history=a.props.history,a.state=a.props.state,void 0!==a.history&&a.manageHistory(a.state,a.history),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"manageHistory",value:function(e,t){for(var a=1;a<this.state.labels.length;a++){var s=t[this.value][a];void 0!==s?e.datasets[0].data.push(s):e.datasets[0].data.unshift(s)}}},{key:"componentDidUpdate",value:function(){if(this.data!==this.props.data){this.data=this.props.data;for(var e=this.state.datasets[0],t=this.state.labels,a=[],r=1;r<t.length;r++){var i=e.data[r];void 0!==i?a.push(i):a.unshift(i)}t.shift(),t.push("");var n=this.data[this.value];a.push(n),this.setState(Object(s.a)({},this.state,{datasets:[Object(s.a)({},e,{data:a})]}))}}},{key:"render",value:function(){return c.a.createElement(T.a,{data:this.state,options:this.props.opts})}}]),t}(d.Component),P=function(e){var t=e.data,a=e.history;return c.a.createElement(J,{state:A,opts:R,value:"power",data:t,history:a})},_=function(e){var t=e.data,a=e.history;return c.a.createElement(J,{state:S,opts:H,value:"cadence",data:t,history:a})},U=function(e){var t=e.data,a=e.history;return c.a.createElement(J,{state:W,opts:D,value:"speed",data:t,history:a})},Z=function(e){var t=e.data,a=e.history;return c.a.createElement(J,{state:B,opts:M,value:"heartrate",data:t,history:a})},q=function(e){var t=e.time,a=e.gear,s=e.distance,r=e.showExtra,i=e.weather;return r?c.a.createElement(h.a,null,c.a.createElement(m.a,{xs:"12",sm:"6",lg:"4"},c.a.createElement(u.a,{className:"text-white bg-primary"},c.a.createElement(p.a,{className:"pb-2"},c.a.createElement("div",null,"Time [s]"),c.a.createElement("div",{className:"text-value text-center"},t)))),c.a.createElement(m.a,{xs:"12",sm:"6",lg:"2"},c.a.createElement(u.a,{className:"text-white bg-dark"},c.a.createElement(p.a,{className:"pb-2"},c.a.createElement("div",null,"Gear"),c.a.createElement("div",{className:"text-value text-center"},a)))),c.a.createElement(m.a,{xs:"12",sm:"6",lg:"2"},c.a.createElement(u.a,{className:"text-dark bg-secondary"},c.a.createElement(p.a,{className:"pb-2"},c.a.createElement("div",null,"Distance [m]"),c.a.createElement("div",{className:"text-value text-center"},s)))),c.a.createElement(m.a,{xs:"12",sm:"6",lg:"4"},c.a.createElement(u.a,{className:"text-white bg-purple"},c.a.createElement(p.a,{className:"pb-2"},c.a.createElement(h.a,null,c.a.createElement(m.a,{xs:"4",sm:"4",lg:"4"},c.a.createElement("div",{className:"text-center"},"Temp [\xb0C]"),c.a.createElement("div",{className:"text-value text-center"},i.temperature)),c.a.createElement(m.a,{xs:"4",sm:"4",lg:"4"},c.a.createElement("div",{className:"text-center"},"Altitude [m]"),c.a.createElement("div",{className:"text-value text-center"},i.altitude)),c.a.createElement(m.a,{xs:"4",sm:"4",lg:"4"},c.a.createElement("div",{className:"text-center"},"Press [hPa]"),c.a.createElement("div",{className:"text-value text-center"},i.pressure))))))):null},I=a(147),L=a(716),G=a(715),F=a(714),K=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(n.a)(this,Object(l.a)(t).call(this,e)))._isMounted=!1,a.loading=function(){return c.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")},a.state={data:"",history:"",weather:"",showExtra:!0},I.a.getHistory((function(e){a.history(e)})),I.a.requestData(),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"history",value:function(e){var t=["heartrate","cadence","power","speed"],a={heartrate:[],cadence:[],power:[],speed:[]},r={heartrate:[],cadence:[],power:[],speed:[]},i=e.reverse(),n=i.slice(0,200),l=i.slice(0,50);n.reverse(),l.reverse();for(var o=0;o<n.length&&o<200;o++)for(var d=0;d<t.length;d++)a[t[d]].push(JSON.parse(n[o])[t[d]]),o<50&&r[t[d]].push(JSON.parse(l[o])[t[d]]);var c=Object(s.a)({},this.state,{history:{chart:a,miniChart:r}});this.setState(c)}},{key:"updateData",value:function(e){this.setState({data:e}),this._isMounted&&setTimeout((function(){I.a.requestData()}),300)}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,I.a.getHistory((function(t){e.history(t)})),I.a.getData((function(t){e.updateData(t)})),I.a.getWeather((function(t){return e.setState({weather:t})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return""===this.state.history?null:c.a.createElement("article",null,c.a.createElement(h.a,null,c.a.createElement(m.a,{xs:"12",sm:"6",lg:"3"},c.a.createElement(u.a,{className:"text-white bg-info"},c.a.createElement(p.a,{className:"pb-0"},c.a.createElement(b.a,{id:"card1",className:"float-right"},c.a.createElement(F.a,{size:"1.5em"})),c.a.createElement("div",{className:"text-value"},this.state.data.power),c.a.createElement("div",null,"Power [W]")),c.a.createElement("div",{className:"chart-wrapper",style:{height:"60px"}},c.a.createElement(P,{data:this.state.data,history:this.state.history.miniChart})))),c.a.createElement(m.a,{xs:"12",sm:"6",lg:"3"},c.a.createElement(u.a,{className:"text-white bg-success"},c.a.createElement(p.a,{className:"pb-0"},c.a.createElement(b.a,{id:"card2",className:"float-right"},c.a.createElement(G.a,{size:"1.5em"})),c.a.createElement("div",{className:"text-value"},this.state.data.cadence),c.a.createElement("div",null,"Cadence [rpm]")),c.a.createElement("div",{className:"chart-wrapper",style:{height:"60px"}},c.a.createElement(_,{data:this.state.data,history:this.state.history.miniChart})))),c.a.createElement(m.a,{xs:"12",sm:"6",lg:"3"},c.a.createElement(u.a,{className:"text-white bg-warning"},c.a.createElement(p.a,{className:"pb-0"},c.a.createElement(b.a,{id:"card3",className:"float-right"},c.a.createElement(G.b,{size:"1.5em"})),c.a.createElement("div",{className:"text-value"},this.state.data.speed),c.a.createElement("div",null,"Speed [km/h]")),c.a.createElement("div",{className:"chart-wrapper",style:{height:"60px"}},c.a.createElement(U,{data:this.state.data,history:this.state.history.miniChart})))),c.a.createElement(m.a,{xs:"12",sm:"6",lg:"3"},c.a.createElement(u.a,{className:"text-white bg-danger"},c.a.createElement(p.a,{className:"pb-0"},c.a.createElement(b.a,{id:"card4",className:"float-right"},c.a.createElement(L.a,{size:"1.5em"})),c.a.createElement("div",{className:"text-value"},this.state.data.heartrate),c.a.createElement("div",null,"Heartrate [bpm]")),c.a.createElement("div",{className:"chart-wrapper",style:{height:"60px"}},c.a.createElement(Z,{data:this.state.data,history:this.state.history.miniChart}))))),c.a.createElement(h.a,null,c.a.createElement(m.a,null,c.a.createElement(u.a,null,c.a.createElement(p.a,null,c.a.createElement("div",{className:"chart-wrapper",style:{height:"370px",marginTop:0}},c.a.createElement(z,{data:this.state.data,history:this.state.history.chart})))))),c.a.createElement(q,{showExtra:this.state.showExtra,gear:this.state.data.gear,distance:this.state.data.distance,time:this.state.data.time,weather:this.state.weather}))}}]),t}(d.Component);t.default=K}}]);
//# sourceMappingURL=12.872fd058.chunk.js.map