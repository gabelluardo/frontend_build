(this.webpackJsonpmarta=this.webpackJsonpmarta||[]).push([[45],{552:function(e,t,a){"use strict";a.r(t);var n=a(328),l=a(96),s=a(97),i=a(99),r=a(98),c=a(100),o=a(1),m=a.n(o),u=a(304),p=a(305),d=a(306),h=a(308),E=a(310),g=a(335),f=a(307),b=a(502),v=a(503),y=a(504),O=a(327),S=a(322),x=a(324),N=a(103),w=a(169),j=(a(494),a(495),{type:"info",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],width:300,dismiss:{duration:2500,onScreen:!0,pauseOnHover:!0,showIcon:!0}});function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var V=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e)))._isMounted=!1,a.updateView=function(){a.reloadStatus()},a.loading=function(){return m.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")},a.state={settings:"",state:"",visible:!1,visible_video:!1,visible_rasp:!1},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.reloadStatus()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"reloadStatus",value:function(){var e=this;N.a.getSettings((function(t){JSON.stringify(e.state.settings)!==JSON.stringify(t)&&e.setState({settings:t})})),N.a.getState((function(t){e.setState({state:t})}))}},{key:"render",value:function(){return""===this.state.state||""===this.state.settings?null:m.a.createElement("div",{className:"animated fadeIn"},m.a.createElement(u.a,null,m.a.createElement(p.a,{xs:"12",xl:"4"},m.a.createElement(I,{settings:this.state.settings,state:this.state.state,reloadStatus:this.updateView})),m.a.createElement(p.a,{xs:"12",xl:"4"},m.a.createElement(z,{value:this.state.state.video_recording,dest:this.state.state.dest,reloadStatus:this.updateView}),m.a.createElement(J,{dest:this.state.state.dest,reloadStatus:this.updateView})),m.a.createElement(p.a,{xs:"12",xl:"4"},m.a.createElement(R,{settings:this.state.settings,reloadStatus:this.updateView}))))}}]),t}(o.Component),z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).handleSwitch=function(){a.inputVideo.value=!a.inputVideo.value},a.handleText=function(e){var t=e.target.value;e.target.validity.valid&&(a.inputVideo.name=t)},a.toggle=function(){a.setState({collapse:!a.state.collapse})},a.sendVideo=function(){w.store.addNotification(C({title:"Video",message:"Invio del pacchetto video alla bici"},j)),N.a.sendVideo(a.inputVideo),a.props.reloadStatus()},a.state={collapse:!1},a.inputVideo={dest:a.props.dest,type:"7",value:a.props.value,name:""},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return m.a.createElement(d.a,null,m.a.createElement(h.a,null,m.a.createElement(E.a,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:this.toggle,"aria-expanded":this.state.collapse},m.a.createElement("strong",null,"Video"))),m.a.createElement(g.a,{isOpen:!this.state.collapse},m.a.createElement(f.a,null,m.a.createElement(b.a,{action:"",encType:"multipart/form-data",className:"form-horizontal"},m.a.createElement(v.a,{row:!0},m.a.createElement(p.a,{md:"9"},m.a.createElement(y.a,null,"Registrazione")),m.a.createElement(p.a,{md:"3"},m.a.createElement(x.l,{className:"mx-1",variant:"pill",color:"primary",outline:"alt",label:!0,checked:this.props.value,onChange:this.handleSwitch}))),m.a.createElement(v.a,{row:!0},m.a.createElement(p.a,{md:"5"},m.a.createElement(y.a,null,"File")),m.a.createElement(p.a,{md:"7"},m.a.createElement(O.a,{className:"text-center",type:"text",pattern:"*",placeholder:"Inserire nome del file video",onChange:this.handleText}))))),m.a.createElement(S.a,null,m.a.createElement(u.a,null,m.a.createElement(p.a,{md:"9"},m.a.createElement(E.a,{type:"submit","data-dismiss":"alert",size:"sl",color:"primary",onClick:this.sendVideo},m.a.createElement("i",{className:"fa fa-sign-out"})," Send"),"\u2002")))))}}]),t}(o.Component),R=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).handleSwitch=function(e){var t=a.inputSettings,n=!t[e];t[e]=n},a.handleText=function(e,t){var n=a.inputSettings,l=t.target.value;t.target.validity.valid&&(n[e]=l)},a.toggle=function(){a.setState({collapse:!a.state.collapse})},a.saveSettings=function(){w.store.addNotification(C({title:"Settings",message:"Invio del pacchetto settings alla bici"},j)),a.inputSettings.update=function(){var e=new Date,t=e.getDate()+"-"+("0"+(e.getMonth()+1)).slice(-2);return("0"+(e.getHours()+1)).slice(-2)+":"+("0"+(e.getMinutes()+1)).slice(-2)+":"+("0"+(e.getSeconds()+1)).slice(-2)+"_"+t}(),N.a.saveSettings(a.inputSettings),a.props.reloadStatus()},a.state={collapse:!1},a.inputSettings=JSON.parse(JSON.stringify(a.props.settings)),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return m.a.createElement(d.a,null,m.a.createElement(h.a,null,m.a.createElement(E.a,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:this.toggle,"aria-expanded":this.state.collapse},m.a.createElement("strong",null,"Impostazioni"))),m.a.createElement(g.a,{isOpen:!this.state.collapse},m.a.createElement(f.a,null,m.a.createElement(b.a,{action:"",encType:"multipart/form-data",className:"form-horizontal"},m.a.createElement(v.a,{row:!0},m.a.createElement(p.a,{md:"9"},m.a.createElement(y.a,null,"Log")),m.a.createElement(p.a,{md:"3"},m.a.createElement(x.l,{className:"mx-1",variant:"pill",color:"primary",outline:"alt",label:!0,onChange:this.handleSwitch.bind(this,"log"),checked:this.props.settings.log}))),m.a.createElement(v.a,{row:!0},m.a.createElement(p.a,{md:"9"},m.a.createElement(y.a,null,"Csv")),m.a.createElement(p.a,{md:"3"},m.a.createElement(x.l,{className:"mx-1",variant:"pill",color:"primary",outline:"alt",label:!0,onChange:this.handleSwitch.bind(this,"csv"),checked:this.props.settings.csv}))),m.a.createElement(v.a,{row:!0},m.a.createElement(p.a,{md:"9"},m.a.createElement(y.a,null,"Ant")),m.a.createElement(p.a,{md:"3"},m.a.createElement(x.l,{className:"mx-1",variant:"pill",color:"primary",outline:"alt",label:!0,onChange:this.handleSwitch.bind(this,"ant"),checked:this.props.settings.ant}))),m.a.createElement(v.a,{row:!0},m.a.createElement(p.a,{md:"9"},m.a.createElement(y.a,null,"Potenza media")),m.a.createElement(p.a,{md:"3"},m.a.createElement(O.a,{className:"text-center",type:"number",min:"0",pattern:"",defaultValue:this.props.settings.potenza,onChange:this.handleText.bind(this,"potenza")}))),m.a.createElement(v.a,{row:!0},m.a.createElement(p.a,{md:"9"},m.a.createElement(y.a,null,"Led Mode")),m.a.createElement(p.a,{md:"3"},m.a.createElement(O.a,{className:"text-center",type:"number",min:"0",pattern:"[0-9]*",defaultValue:this.props.settings.led,onChange:this.handleText.bind(this,"led")}))),m.a.createElement(v.a,{row:!0},m.a.createElement(p.a,{md:"9"},m.a.createElement(y.a,null,"Circonferenza")),m.a.createElement(p.a,{md:"3"},m.a.createElement(O.a,{className:"text-center",type:"number",min:"0",pattern:"[0-9]*",defaultValue:this.props.settings.circonferenza,onChange:this.handleText.bind(this,"circonferenza")}))),m.a.createElement(v.a,{row:!0},m.a.createElement(p.a,{md:"9"},m.a.createElement(y.a,null,"Valore calibrazione")),m.a.createElement(p.a,{md:"3"},m.a.createElement(O.a,{className:"text-center",type:"number",min:"0",pattern:"[0-9]*",defaultValue:this.props.settings.calibration_value,onInput:this.handleText.bind(this,"calibration_value")}))),m.a.createElement(v.a,{row:!0},m.a.createElement(p.a,{md:"9"},m.a.createElement(y.a,null,"Run")),m.a.createElement(p.a,{md:"3"},m.a.createElement(O.a,{className:"text-center",type:"number",min:"0",pattern:"[0-9]*",defaultValue:this.props.settings.run,onInput:this.handleText.bind(this,"run")}))))),m.a.createElement(S.a,null,m.a.createElement(u.a,null,m.a.createElement(p.a,{xs:"6",md:"9"},m.a.createElement(E.a,{type:"submit","data-dismiss":"alert",size:"sl",color:"success",onClick:this.saveSettings},m.a.createElement("i",{className:"fa fa-download"})," Save"),"\u2002"),m.a.createElement(p.a,{xs:"6",md:"3"},m.a.createElement("div",{className:"text-center"},this.props.settings.update.replace("_","\n")))))))}}]),t}(o.Component),I=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).toggle=function(){a.setState({collapse:!a.state.collapse})},a.toggleButton=function(){w.store.addNotification(C({},j,{title:"State",message:"Aggiornato lo status",type:"success"})),a.props.reloadStatus()},a.state={status:"",collapse:!1},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(){this.updateStatus()}},{key:"componentDidMount",value:function(){this.updateStatus()}},{key:"updateStatus",value:function(){var e=JSON.parse(JSON.stringify(this.props.state)),t=JSON.parse(JSON.stringify(this.props.settings));delete e.dest,delete e.type,delete t.dest,delete t.type;var a=JSON.stringify(e,null,1).replace(/\{|\}|"|,|/g,"").replace("\n",""),n=JSON.stringify(t,null,1).replace(/\{|\}|"|,/g,"");this.setState({status:a+n})}},{key:"render",value:function(){return m.a.createElement(d.a,null,m.a.createElement(h.a,null,m.a.createElement(E.a,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:this.toggle,"aria-expanded":this.state.collapse},m.a.createElement("strong",null,"Status"))),m.a.createElement(g.a,{isOpen:!this.state.collapse},m.a.createElement(f.a,null,m.a.createElement("pre",null,m.a.createElement("code",null,this.state.status))),m.a.createElement(S.a,null,m.a.createElement(E.a,{className:"text-white bg-cyan",type:"submit",size:"sl",onClick:this.toggleButton},m.a.createElement("i",{className:"fa fa-refresh"})," Reload"))))}}]),t}(o.Component),J=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).toggle=function(){a.setState({collapse:!a.state.collapse})},a.sendRasp=function(e){w.store.addNotification(C({title:"Raspberry",message:"Invio del pacchetto raspberry alla bici"},j)),a.inputRasp.value=e,N.a.sendRasp(a.inputRasp),a.props.reloadStatus()},a.state={collapse:!1},a.inputRasp={dest:a.props.dest,type:"6",value:""},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return m.a.createElement(d.a,null,m.a.createElement(h.a,null,m.a.createElement(E.a,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:this.toggle,"aria-expanded":this.state.collapse},m.a.createElement("strong",null,"Raspberry"))),m.a.createElement(g.a,{isOpen:!this.state.collapse},m.a.createElement(f.a,null,m.a.createElement(u.a,null,m.a.createElement(p.a,{xs:"7",md:"8",xl:"9"},m.a.createElement(E.a,{type:"submit","data-dismiss":"alert",size:"sl",color:"danger",onClick:this.sendRasp.bind(this,"0")},m.a.createElement("i",{className:"fa fa-power-off"})," Spegni")),m.a.createElement(p.a,{xs:"5",md:"4",xl:"3"},m.a.createElement(E.a,{className:"text-white",type:"submit","data-dismiss":"alert",size:"sl",color:"warning",onClick:this.sendRasp.bind(this,"1")},m.a.createElement("i",{className:"fa fa-refresh"})," Riavvia"))))))}}]),t}(o.Component);t.default=V}}]);
//# sourceMappingURL=45.29093199.chunk.js.map