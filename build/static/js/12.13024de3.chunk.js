(this.webpackJsonpmarta=this.webpackJsonpmarta||[]).push([[12],{739:function(e,t,a){"use strict";a.r(t);for(var l=a(546),r=a(2),s=a(560),n=a(561),d=a(711),c=a(712),i=a(732),u=a(616),o=a(617),m=Object(o.getStyle)("--success"),f=Object(o.getStyle)("--info"),p=Object(o.getStyle)("--warning"),b=Object(o.getStyle)("--danger"),h=[],E=0;E<200;E++)h.push("");for(var g={tooltips:{enabled:!1,custom:u.CustomTooltips,intersect:!0,mode:"index",position:"nearest",callbacks:{labelColor:function(e,t){return{backgroundColor:t.data.datasets[e.datasetIndex].borderColor}}}},maintainAspectRatio:!1,legend:{display:!0},scales:{xAxes:[{display:!1,gridLines:{drawOnChartArea:!0}}],yAxes:[{display:!0,ticks:{beginAtZero:!0}}]},elements:{point:{radius:0,hitRadius:10,hoverRadius:4,hoverBorderWidth:3},line:{tension:0}},animation:{duration:0}},v={labels:h,datasets:[{label:"Power",fill:!1,backgroundColor:f,borderColor:f,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]},{label:"Cadence",fill:!1,backgroundColor:m,borderColor:m,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]},{label:"Speed",fill:!1,backgroundColor:p,borderColor:p,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]},{label:"Heartrate",fill:!1,backgroundColor:b,borderColor:b,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]}]},x=[],y=0;y<50;y++)x.push("");var O={labels:x,datasets:[{backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[]}]},j={tooltips:{enabled:!1},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{beginAtZero:!0,max:450}}]},elements:{line:{borderWidth:2},point:{radius:0,hitRadius:10,hoverRadius:0}},animation:{duration:0}},N={labels:x,datasets:[{backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[]}]},C={tooltips:{enabled:!1},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{min:50,max:150}}]},elements:{line:{borderWidth:2},point:{radius:0,hitRadius:10,hoverRadius:0}},animation:{duration:0}},k={labels:x,datasets:[{backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[]}]},w={tooltips:{enabled:!1},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{beginAtZero:!0,max:160}}]},elements:{line:{borderWidth:2},point:{radius:0,hitRadius:10,hoverRadius:0}},animation:{duration:0}},A={labels:x,datasets:[{backgroundColor:"rgba(255,255,255,.2)",borderColor:"rgba(255,255,255,.55)",data:[]}]},R={tooltips:{enabled:!1},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:{min:100,max:200}}]},elements:{line:{borderWidth:2},point:{radius:0,hitRadius:10,hoverRadius:0}},animation:{duration:0}},S=a(599),W=a(548),H=a(578),B=function(e){var t=e.data,a=e.history,s=Object(r.useState)(v),n=Object(l.a)(s,2),d=n[0],c=n[1],i=Object(r.useCallback)((function(){var e,t,l,r,s=Object(W.a)({},d),n=s.datasets;(e=n[0].data).push.apply(e,Object(S.a)(a.power)),(t=n[1].data).push.apply(t,Object(S.a)(a.cadence)),(l=n[2].data).push.apply(l,Object(S.a)(a.speed)),(r=n[3].data).push.apply(r,Object(S.a)(a.heartrate)),c(s)}),[d,a]),u=Object(r.useCallback)((function(){for(var e=d.datasets[0],a=d.datasets[1],l=d.datasets[2],r=d.datasets[3],s=d.labels,n=[],i=[],u=[],o=[],m=1;m<s.length;m++){var f=e.data[m],p=a.data[m],b=l.data[m],h=r.data[m];void 0!==f?(n.push(f),i.push(p),u.push(b),o.push(h)):(n.unshift(f),i.unshift(p),u.unshift(b),o.unshift(h))}s.shift(),s.push(""),n.push(t.power),i.push(t.cadence),u.push(t.speed),o.push(t.heartrate),c(Object(W.a)(Object(W.a)({},d),{},{datasets:[Object(W.a)(Object(W.a)({},e),{},{data:n}),Object(W.a)(Object(W.a)({},a),{},{data:i}),Object(W.a)(Object(W.a)({},l),{},{data:u}),Object(W.a)(Object(W.a)({},r),{},{data:o})]}))}),[d,t]);return Object(r.useEffect)((function(){i()}),[a]),Object(r.useEffect)((function(){u()}),[t]),r.default.createElement(H.a,{data:d,options:g})},T=function(e){var t=e.state,a=e.type,s=e.data,n=e.history,d=e.opts,c=Object(r.useState)(t),i=Object(l.a)(c,2),u=i[0],o=i[1],m=Object(r.useCallback)((function(){var e,t=Object(W.a)({},u);(e=t.datasets[0].data).push.apply(e,Object(S.a)(n[a])),o(t)}),[u,n,a]),f=Object(r.useCallback)((function(){for(var e=Object(W.a)({},u.datasets[0]),t=Object(S.a)(u.labels),l=[],r=1;r<t.length;r++){var n=e.data[r];void 0!==n?l.push(n):l.unshift(n)}t.shift(),t.push("");var d=s[a];l.push(d),o(Object(W.a)(Object(W.a)({},u),{},{datasets:[Object(W.a)(Object(W.a)({},e),{},{data:l})]}))}),[u,a,s]);return Object(r.useEffect)((function(){m()}),[n]),Object(r.useEffect)((function(){f()}),[s]),r.default.createElement(H.a,{data:u,options:d})},z=function(e){var t=e.data,a=e.history;return r.default.createElement(T,{state:O,opts:j,type:"power",data:t,history:a})},D=function(e){var t=e.data,a=e.history;return r.default.createElement(T,{state:N,opts:C,type:"cadence",data:t,history:a})},J=function(e){var t=e.data,a=e.history;return r.default.createElement(T,{state:k,opts:w,type:"speed",data:t,history:a})},P=function(e){var t=e.data,a=e.history;return r.default.createElement(T,{state:A,opts:R,type:"heartrate",data:t,history:a})},Z=function(e){var t=e.time,a=e.gear,l=e.distance,i=e.showExtra,u=e.weather;return i?r.default.createElement(s.a,null,r.default.createElement(n.a,{xs:"12",sm:"6",lg:"4"},r.default.createElement(d.a,{className:"text-white bg-primary"},r.default.createElement(c.a,{className:"pb-2"},r.default.createElement("div",null,"Time [s]"),r.default.createElement("div",{className:"text-value text-center"},t)))),r.default.createElement(n.a,{xs:"12",sm:"6",lg:"2"},r.default.createElement(d.a,{className:"text-white bg-dark"},r.default.createElement(c.a,{className:"pb-2"},r.default.createElement("div",null,"Gear"),r.default.createElement("div",{className:"text-value text-center"},a)))),r.default.createElement(n.a,{xs:"12",sm:"6",lg:"2"},r.default.createElement(d.a,{className:"text-dark bg-secondary"},r.default.createElement(c.a,{className:"pb-2"},r.default.createElement("div",null,"Distance [m]"),r.default.createElement("div",{className:"text-value text-center"},l)))),r.default.createElement(n.a,{xs:"12",sm:"6",lg:"4"},r.default.createElement(d.a,{className:"text-white bg-purple"},r.default.createElement(c.a,{className:"pb-2"},r.default.createElement(s.a,null,r.default.createElement(n.a,{xs:"4",sm:"4",lg:"4"},r.default.createElement("div",{className:"text-center"},"Temp [\xb0C]"),r.default.createElement("div",{className:"text-value text-center"},u.temperature)),r.default.createElement(n.a,{xs:"4",sm:"4",lg:"4"},r.default.createElement("div",{className:"text-center"},"Altitude [m]"),r.default.createElement("div",{className:"text-value text-center"},u.altitude)),r.default.createElement(n.a,{xs:"4",sm:"4",lg:"4"},r.default.createElement("div",{className:"text-center"},"Press [hPa]"),r.default.createElement("div",{className:"text-value text-center"},u.pressure))))))):null},q=a(141),I=a(715),L=a(714),G=a(713);t.default=function(){var e=function(){var e=Object(r.useRef)(!1);return Object(r.useEffect)((function(){return e.current=!0,function(){return e.current=!1}}),[]),e}(),t=Object(r.useState)(),a=Object(l.a)(t,2),u=a[0],o=a[1],m=Object(r.useState)(),f=Object(l.a)(m,2),p=f[0],b=f[1],h=Object(r.useState)(),E=Object(l.a)(h,2),g=E[0],v=E[1],x=void 0===u||void 0===g||void 0===p,y=Object(r.useCallback)((function(e){var t=["heartrate","cadence","power","speed"],a={heartrate:[],cadence:[],power:[],speed:[]},l={heartrate:[],cadence:[],power:[],speed:[]},r=e.reverse(),s=r.slice(0,200),n=r.slice(0,50);s.reverse(),n.reverse();for(var d=0;d<s.length&&d<200;d++)for(var c=0;c<t.length;c++)a[t[c]].push(JSON.parse(s[d])[t[c]]),d<50&&l[t[c]].push(JSON.parse(n[d])[t[c]]);b({chart:a,miniChart:l})}),[]),O=Object(r.useCallback)((function(t){o(t),e.current&&setTimeout((function(){q.a.requestData()}),300)}),[e]);Object(r.useEffect)((function(){q.a.requestData(),q.a.getHistory((function(e){return y(e)})),q.a.getData((function(e){return O(e)})),q.a.getWeather((function(e){return v(e)}))}),[y,O]);return x?function(){return r.default.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")}:r.default.createElement("article",null,r.default.createElement(s.a,null,r.default.createElement(n.a,{xs:"12",sm:"6",lg:"3"},r.default.createElement(d.a,{className:"text-white bg-info"},r.default.createElement(c.a,{className:"pb-0"},r.default.createElement(i.a,{id:"card1",className:"float-right"},r.default.createElement(G.a,{size:"1.5em"})),r.default.createElement("div",{className:"text-value"},u.power),r.default.createElement("div",null,"Power [W]")),r.default.createElement("div",{className:"chart-wrapper",style:{height:"60px"}},r.default.createElement(z,{data:u,history:p.miniChart})))),r.default.createElement(n.a,{xs:"12",sm:"6",lg:"3"},r.default.createElement(d.a,{className:"text-white bg-success"},r.default.createElement(c.a,{className:"pb-0"},r.default.createElement(i.a,{id:"card2",className:"float-right"},r.default.createElement(L.a,{size:"1.5em"})),r.default.createElement("div",{className:"text-value"},u.cadence),r.default.createElement("div",null,"Cadence [rpm]")),r.default.createElement("div",{className:"chart-wrapper",style:{height:"60px"}},r.default.createElement(D,{data:u,history:p.miniChart})))),r.default.createElement(n.a,{xs:"12",sm:"6",lg:"3"},r.default.createElement(d.a,{className:"text-white bg-warning"},r.default.createElement(c.a,{className:"pb-0"},r.default.createElement(i.a,{id:"card3",className:"float-right"},r.default.createElement(L.b,{size:"1.5em"})),r.default.createElement("div",{className:"text-value"},u.speed),r.default.createElement("div",null,"Speed [km/h]")),r.default.createElement("div",{className:"chart-wrapper",style:{height:"60px"}},r.default.createElement(J,{data:u,history:p.miniChart})))),r.default.createElement(n.a,{xs:"12",sm:"6",lg:"3"},r.default.createElement(d.a,{className:"text-white bg-danger"},r.default.createElement(c.a,{className:"pb-0"},r.default.createElement(i.a,{id:"card4",className:"float-right"},r.default.createElement(I.a,{size:"1.5em"})),r.default.createElement("div",{className:"text-value"},u.heartrate),r.default.createElement("div",null,"Heartrate [bpm]")),r.default.createElement("div",{className:"chart-wrapper",style:{height:"60px"}},r.default.createElement(P,{data:u,history:p.miniChart}))))),r.default.createElement(s.a,null,r.default.createElement(n.a,null,r.default.createElement(d.a,null,r.default.createElement(c.a,null,r.default.createElement("div",{className:"chart-wrapper",style:{height:"370px",marginTop:0}},r.default.createElement(B,{data:u,history:p.chart})))))),r.default.createElement(Z,{showExtra:!0,gear:u.gear,distance:u.distance,time:u.time,weather:g}))}}}]);
//# sourceMappingURL=12.13024de3.chunk.js.map